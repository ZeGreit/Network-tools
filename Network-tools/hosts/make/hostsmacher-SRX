#!/bin/bash

### Creates hosts file from config files generated by "show interfaces routed" command on Juniper SRX collected by SRX-coll script and placed into fw/JSRX dir


a=`ls *.tmp`

for file in $a; do

dos2unix $file 2>/dev/null

cat $file | while read line;
do

if [[ "$line" == *show" "interfa* ]]
then
t1=`echo $line | awk '{print $1}'`
t2=${t1%">"*}
device=${t2#*"@"}
fi

if [[ "$line" == *\<name\>* ]];then
If=`echo $line | sed -e 's/<\/*name*>//g'`
fi

if [[ "$line" == *logical-interface-zone* ]];then
zone=`echo $line | sed -e 's/<\/*logical-interface-zone-name*>//g'`
fi

if [[ "$line" == *\<ifa-local\>* ]];then
IP=`echo $line | sed -e 's/<\/*ifa-local*>//g'`

echo $IP\|$device\|\|$zone\|$If\|

fi

done
done
